<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spam Email Detection System</title>
    <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            overflow-x: hidden;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .glass-effect {
            background: rgba(15, 23, 42, 0.75);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.36);
        }
        
        .score-indicator {
            height: 8px;
            transition: width 0.5s ease-in-out;
        }
        
        .loading {
            position: relative;
            overflow: hidden;
        }
        
        .loading::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.5), transparent);
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        @media (max-width: 640px) {
            .glass-effect {
                padding: 1rem !important;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div id="canvas-container"></div>

    <div class="container mx-auto px-4 py-8 md:py-12 relative z-10">
        <div class="max-w-2xl mx-auto glass-effect rounded-xl p-6 md:p-8">
            <h1 class="text-3xl md:text-4xl font-bold mb-6 text-center flex items-center justify-center">
                <i class="bi bi-shield-check mr-2 text-blue-400"></i>
                Spam Email Detector
            </h1>
            
            <div class="mb-2 text-gray-300 text-sm text-center">
                Paste an email to check if it contains spam indicators
            </div>

            <div class="mb-6">
                <textarea id="emailContent" 
                    class="w-full h-40 md:h-48 p-4 rounded-lg bg-gray-800 text-white border border-gray-700 focus:outline-none focus:border-blue-500 transition-colors"
                    placeholder="Paste your email content here..."></textarea>
            </div>

            <div class="flex justify-center">
                <button onclick="detectSpam()" 
                    class="px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition-all duration-200 flex items-center transform hover:scale-105">
                    <i class="bi bi-search mr-2"></i>
                    Analyze Email
                </button>
            </div>

            <div id="result" class="mt-8 p-5 rounded-lg hidden glass-effect">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2">
                    <h3 class="text-xl font-semibold">Analysis Result:</h3>
                    <div id="spamProbabilityContainer" class="flex items-center">
                        <div id="spamIcon" class="mr-2"></div>
                        <div id="spamProbability" class="text-xl md:text-2xl font-bold"></div>
                    </div>
                </div>
                
                <div class="mt-4 w-full bg-gray-700 rounded-full h-2">
                    <div id="scoreBar" class="score-indicator rounded-full"></div>
                </div>
                
                <div class="mt-6 space-y-3" id="indicatorsHeader">
                    <h4 class="font-medium text-lg border-b border-gray-700 pb-2">Detected Indicators:</h4>
                </div>
                <div id="indicators" class="mt-2 space-y-3"></div>
                
                <div id="suggestion" class="mt-6 p-4 rounded-lg text-sm"></div>
            </div>
        </div>
        
        <div class="text-center text-gray-500 text-xs mt-6">
            © 2023 Spam Email Detection System | Powered by AI
        </div>
    </div>

    <script>
        // Three.js Background
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x0f172a, 1);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // Create particles
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 1000;
        const posArray = new Float32Array(particlesCount * 3);
        
        for(let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 15;
        }
        
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.02,
            color: 0x3b82f6,
            transparent: true,
            opacity: 0.8
        });
        
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        // Create mesh
        const geometry = new THREE.IcosahedronGeometry(1.5, 1);
        const material = new THREE.MeshPhongMaterial({
            color: 0x3b82f6,
            wireframe: true,
            transparent: true,
            opacity: 0.7
        });
        const mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
        scene.add(ambientLight);
        
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(1, 1, 1);
        scene.add(directionalLight);

        camera.position.z = 5;

        // Mouse interaction
        let mouseX = 0;
        let mouseY = 0;
        
        function onDocumentMouseMove(event) {
            mouseX = (event.clientX - window.innerWidth / 2) / 500;
            mouseY = (event.clientY - window.innerHeight / 2) / 500;
        }
        
        function onDocumentTouchMove(event) {
            if (event.touches.length === 1) {
                mouseX = (event.touches[0].clientX - window.innerWidth / 2) / 500;
                mouseY = (event.touches[0].clientY - window.innerHeight / 2) / 500;
            }
        }
        
        document.addEventListener('mousemove', onDocumentMouseMove, false);
        document.addEventListener('touchmove', onDocumentTouchMove, false);

        function animate() {
            requestAnimationFrame(animate);
            
            // Rotate mesh based on mouse position
            mesh.rotation.x += 0.002;
            mesh.rotation.y += 0.003;
            mesh.rotation.x += (mouseY * 0.1 - mesh.rotation.x) * 0.05;
            mesh.rotation.y += (mouseX * 0.1 - mesh.rotation.y) * 0.05;
            
            // Rotate particles
            particlesMesh.rotation.x += 0.0004;
            particlesMesh.rotation.y += 0.0006;
            
            renderer.render(scene, camera);
        }
        
        animate();

        // Spam Detection Logic
        function detectSpam() {
            const emailContent = document.getElementById('emailContent').value.toLowerCase();
            
            if (emailContent.trim() === '') {
                alert('Please enter email content to analyze');
                return;
            }
            
            // Show loading effect
            const resultDiv = document.getElementById('result');
            resultDiv.classList.remove('hidden');
            document.getElementById('spamProbability').innerHTML = 'Analyzing...';
            document.getElementById('spamIcon').innerHTML = '<i class="bi bi-hourglass-split text-blue-400"></i>';
            document.getElementById('indicators').innerHTML = '';
            document.getElementById('scoreBar').style.width = '0%';
            document.getElementById('scoreBar').className = 'score-indicator rounded-full loading bg-blue-500';
            
            // Simulate processing time
            setTimeout(() => {
                const spamIndicators = [
                    { pattern: /\b(viagra|cialis|medication|pharmacy|prescription|meds)\b/gi, weight: 0.7, description: "Contains pharmaceutical terms" },
                    { pattern: /\b(win|winner|won|lottery|prize|reward|claim|bonus)\b/gi, weight: 0.6, description: "Contains lottery/winning/rewards related terms" },
                    { pattern: /\b(urgent|action required|immediate|act now|limited time)\b/gi, weight: 0.5, description: "Uses urgency tactics" },
                    { pattern: /[$€£]\d+([,\.]\d+)?/g, weight: 0.4, description: "Contains monetary amounts" },
                    { pattern: /\b(free|discount|offer|special deal|limited offer)\b/gi, weight: 0.3, description: "Contains promotional terms" },
                    { pattern: /\b(click on the otp|verify|verification|confirm|validate|authenticate)\b/gi, weight: 0.75, description: "Requests credential verification" },
                    { pattern: /\b(want a job|job offer|employment|opportunity|career|position)\b/gi, weight: 0.65, description: "Contains job offer terminology" },
                    { pattern: /\b(invest|investment|crypto|bitcoin|stock|trading)\b/gi, weight: 0.7, description: "Contains investment terminology" },
                    { pattern: /\b(password|login|account|security|update required)\b/gi, weight: 0.8, description: "Requests account credentials" },
                    { pattern: /\b(click here|click below|click link|follow link)\b/gi, weight: 0.6, description: "Contains suspicious link requests" },
                    { pattern: /\b(prince|nigeria|overseas|foreign|inheritance|fortune)\b/gi, weight: 0.8, description: "Contains scam terminology" }
                ];

                let spamScore = 0;
                const maxPossibleScore = spamIndicators.reduce((acc, ind) => acc + ind.weight, 0);
                let detectedIndicators = [];

                spamIndicators.forEach(indicator => {
                    const matches = (emailContent.match(indicator.pattern) || []);
                    if (matches.length > 0) {
                        const uniqueMatches = [...new Set(matches.map(match => match.toLowerCase()))];
                        const weightedScore = Math.min(indicator.weight * (1 + (uniqueMatches.length - 1) * 0.2), indicator.weight * 2);
                        spamScore += weightedScore;
                        
                        detectedIndicators.push({
                            description: indicator.description,
                            count: uniqueMatches.length,
                            examples: uniqueMatches.slice(0, 3),
                            weight: indicator.weight
                        });
                    }
                });
                
                // Text analysis for additional patterns
                const sentencesWithCaps = emailContent.split(/[.!?]+/).filter(sentence => {
                    const words = sentence.trim().split(/\s+/);
                    return words.length > 3 && words.filter(w => w === w.toUpperCase() && w.length > 2).length > 2;
                });
                
                if (sentencesWithCaps.length > 0) {
                    spamScore += 0.4;
                    detectedIndicators.push({
                        description: "Excessive use of UPPERCASE letters",
                        count: sentencesWithCaps.length,
                        examples: [],
                        weight: 0.4
                    });
                }
                
                // Calculate percentage
                const spamProbability = Math.min((spamScore / maxPossibleScore) * 100, 98);
                const roundedProbability = Math.max(Math.round(spamProbability), detectedIndicators.length > 0 ? 15 : 0);
                
                // Display results
                const probabilityDiv = document.getElementById('spamProbability');
                const indicatorsDiv = document.getElementById('indicators');
                const suggestionDiv = document.getElementById('suggestion');
                const scoreBar = document.getElementById('scoreBar');
                const spamIcon = document.getElementById('spamIcon');
                
                // Sort indicators by weight
                detectedIndicators.sort((a, b) => b.weight - a.weight);
                
                // Set probability text and color
                probabilityDiv.textContent = `${roundedProbability}% Spam Probability`;
                
                // Remove loading animation
                scoreBar.classList.remove('loading');
                
                if (roundedProbability > 70) {
                    probabilityDiv.className = 'text-red-500 text-xl md:text-2xl font-bold';
                    scoreBar.className = 'score-indicator rounded-full bg-red-500';
                    spamIcon.innerHTML = '<i class="bi bi-exclamation-triangle-fill text-red-500"></i>';
                    suggestionDiv.className = 'mt-6 p-4 rounded-lg text-sm bg-red-900/30 border border-red-800/50';
                    suggestionDiv.innerHTML = `<p class="font-semibold"><i class="bi bi-exclamation-triangle mr-2"></i>High Spam Risk</p>
                    <p class="mt-1">This email shows strong indicators of being spam or a phishing attempt. Be extremely cautious and avoid clicking any links or providing personal information.</p>`;
                } else if (roundedProbability > 40) {
                    probabilityDiv.className = 'text-yellow-400 text-xl md:text-2xl font-bold';
                    scoreBar.className = 'score-indicator rounded-full bg-yellow-400';
                    spamIcon.innerHTML = '<i class="bi bi-question-circle-fill text-yellow-400"></i>';
                    suggestionDiv.className = 'mt-6 p-4 rounded-lg text-sm bg-yellow-900/30 border border-yellow-800/50';
                    suggestionDiv.innerHTML = `<p class="font-semibold"><i class="bi bi-shield-exclamation mr-2"></i>Moderate Spam Risk</p>
                    <p class="mt-1">This email contains some suspicious elements. Verify the sender's identity before taking any action or clicking on links.</p>`;
                } else {
                    probabilityDiv.className = 'text-green-500 text-xl md:text-2xl font-bold';
                    scoreBar.className = 'score-indicator rounded-full bg-green-500';
                    spamIcon.innerHTML = '<i class="bi bi-check-circle-fill text-green-500"></i>';
                    suggestionDiv.className = 'mt-6 p-4 rounded-lg text-sm bg-green-900/30 border border-green-800/50';
                    suggestionDiv.innerHTML = `<p class="font-semibold"><i class="bi bi-shield-check mr-2"></i>Low Spam Risk</p>
                    <p class="mt-1">This email appears to be legitimate with few or no spam indicators detected.</p>`;
                }
                
                // Set score bar width with animation
                scoreBar.style.width = `${roundedProbability}%`;
                
                // Generate indicators HTML
                if (detectedIndicators.length === 0) {
                    indicatorsDiv.innerHTML = `
                        <div class="flex items-center justify-center p-3 bg-gray-800/60 rounded text-gray-400">
                            <i class="bi bi-check-circle mr-2"></i>
                            <span>No spam indicators detected in this email</span>
                        </div>
                    `;
                    document.getElementById('indicatorsHeader').classList.add('hidden');
                } else {
                    document.getElementById('indicatorsHeader').classList.remove('hidden');
                    indicatorsDiv.innerHTML = detectedIndicators.map(ind => `
                        <div class="flex flex-col p-3 bg-gray-800/60 rounded">
                            <div class="flex items-center justify-between">
                                <span class="flex items-center">
                                    <i class="bi bi-exclamation-circle text-yellow-400 mr-2"></i>
                                    ${ind.description}
                                </span>
                                <span class="bg-blue-600 px-2 py-1 rounded-full text-xs">${ind.count} ${ind.count === 1 ? 'match' : 'matches'}</span>
                            </div>
                            ${ind.examples && ind.examples.length > 0 ? `
                                <div class="mt-2 text-xs text-gray-400">
                                    Found: ${ind.examples.map(ex => `<span class="inline-block bg-gray-700 px-2 py-1 rounded mr-1 mt-1">${ex}</span>`).join('')}
                                </div>
                            ` : ''}
                        </div>
                    `).join('');
                }
            }, 1500); // Simulated analysis time
        }

        // Responsive handling
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        // Example button (optional helper)
        function loadExample() {
            document.getElementById('emailContent').value = `Dear Customer,
            
URGENT ACTION REQUIRED! Your account will be suspended within 24 hours.
            
Congratulations! You've WON our LOTTERY prize of $5,000! Click here to CLAIM YOUR BONUS reward now!
            
Want a job? Work from home and earn $500 daily. LIMITED TIME OFFER!
            
Please verify your account by clicking on the OTP link below.
            
Best regards,
Account Security Team`;
            
            detectSpam();
        }
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>